/*
 * JSP generated by Resin-3.0.28 (built Mon, 18 May 2009 02:16:38 PDT)
 */

package _jsp._web_22dinf._vistas;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.util.Enumeration;
import java.util.Vector;
import com.siagcee.logic.*;

public class _userform__jsp extends com.caucho.jsp.JavaPage{
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.Application _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = com.caucho.jsp.QJspFactory.allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html;charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
int _opcion = 0;

String _mensaje = "";
if(request.getAttribute("mensaje") != null){
	_mensaje = (String)request.getAttribute("mensaje");
}

String _titulo = "";

InstanciaObjeto seleccionado = null;
if(request.getAttribute("InstanciaSeleccionadaPorId") != null){
	seleccionado = (InstanciaObjeto)request.getAttribute("InstanciaSeleccionadaPorId");
	_opcion = 1;
	_titulo = "Identifiquese para Acceder ";
	if(seleccionado.getObjetoAsociado().getClass().toString().contains("Censo")){
		_titulo = _titulo + "al Censo";
	}else{
		_titulo = _titulo + "a la Encuesta";
	}
}

Vector _insVector = new Vector();
if(request.getAttribute("insVector") != null){
	_opcion = 0;
	_insVector = (Vector)request.getAttribute("insVector");
	_titulo = "Seleccione el Censo o Encuesta a Responder";
}

      out.write(_jsp_string1, 0, _jsp_string1.length);
       out.print(_titulo);
      out.write(_jsp_string2, 0, _jsp_string2.length);
      
			out.println(_mensaje+"<p />");
			if(_opcion == 0){
				if(!_insVector.isEmpty()){
					Vector _instrumentos = new Vector();
					Enumeration _enu = _insVector.elements();
					InstanciaObjeto _insObj = null;
					
      out.write(_jsp_string3, 0, _jsp_string3.length);
      
							while (_enu.hasMoreElements()){
								_insObj = (InstanciaObjeto)_enu.nextElement();
								if(!(_insObj.getAcceso() == 0 || (request.getParameter("muestratodos") != null))){
									//solo muestro los publicos
									//los restringidos se acceden por links
									continue;
								}
								
      out.write(_jsp_string4, 0, _jsp_string4.length);
       out.print(_insObj.getIdPublico()); 
      out.write(_jsp_string5, 0, _jsp_string5.length);
       out.print(_insObj.getObjeto()); 
      out.write(_jsp_string6, 0, _jsp_string6.length);
      
							}
								
      out.write(_jsp_string7, 0, _jsp_string7.length);
      
					}else{
						out.println("No existen censos o encuestas disponibles. Disculpe.");
					}
				}else{
					//solicito campo_clave
					InstanciaPregunta _miPreguntaClave = seleccionado.getObjetoAsociado().retornaPreguntaClave(true);
					if(_miPreguntaClave != null){
						out.println("<form action='autenticarusuario.do' method='post'>");
						out.println("<input type='hidden' value='"+seleccionado.getId()+"' id='id_instrumento' name='id_instrumento'>");
						out.println("<label>"+_miPreguntaClave.getTextoPregunta()+"</label><br />");
						if(_miPreguntaClave.getTipoPregunta() == 1){
							out.println("<select id='campo_clave' name='campo_clave'>");
							try{
								Enumeration _misResp = _miPreguntaClave.getPreguntaAsociada().retornaRespuestasPosibles(true).elements();
								RespuestasPosibles __misResp;
								while(_misResp.hasMoreElements()){
									__misResp = (RespuestasPosibles)_misResp.nextElement();
									out.println("<option value='"+__misResp.getId()+"'>"+__misResp.getRespuesta()+"</option>");
								}
							}catch(Exception e){
								e.printStackTrace();
							}finally{
								out.println("</select>");
							}
						}else if(_miPreguntaClave.getTipoPregunta() == 30){
							out.println("<input type='text' id='campo_clave' name='campo_clave'>");
						}else if(_miPreguntaClave.getTipoPregunta() == 31){
							out.println("<input type='text' id='campo_clave' name='campo_clave' onblur='validarEntero(\"campo_clave\");'>");
						}else if(_miPreguntaClave.getTipoPregunta() == 32){
							out.println("<input type='text' id='campo_clave' name='campo_clave' onblur='validarDouble(\"campo_clave\");'>");
						}else if(_miPreguntaClave.getTipoPregunta() == 33){
							out.println("<input type='text' id='campo_clave' name='campo_clave' readonly onclick='if(self.gfPop)gfPop.fPopCalendar(document.getElementById(\"campo_clave\"));return false;'>");
						}else{
							out.println("No es posible identificarlo como miembro de la poblaci&oacute;n por error en la definici&oacute;n por parte del administrador. disculpe.");
						}
						out.println("<input type='submit' value='Acceder'>");
						out.println("</form>");
					}else{
						out.println("Redireccionando hacia el Censo o la Encuesta.");
						
      out.write(_jsp_string8, 0, _jsp_string8.length);
       out.println("<input type='hidden' value='"+seleccionado.getId()+"' id='id_instrumento' name='id_instrumento'>"); 
      out.write(_jsp_string9, 0, _jsp_string9.length);
      
					}
				}
			
      out.write(_jsp_string10, 0, _jsp_string10.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      com.caucho.jsp.QJspFactory.freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.make.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.util.CauchoSystem.getVersionId() != -4644494061398360982L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.make.Dependency depend;
      depend = (com.caucho.make.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/userform.jsp"), 8706134575439904977L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/userheader.jsp"), -2231565818208207886L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/adminfooter.jsp"), 8445709753414532245L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string8;
  private final static char []_jsp_string1;
  private final static char []_jsp_string5;
  private final static char []_jsp_string9;
  private final static char []_jsp_string10;
  private final static char []_jsp_string7;
  private final static char []_jsp_string0;
  private final static char []_jsp_string2;
  private final static char []_jsp_string6;
  private final static char []_jsp_string3;
  private final static char []_jsp_string4;
  static {
    _jsp_string8 = "\r\n							<form action=\"autenticarusuario.do\" method=\"post\">\r\n								".toCharArray();
    _jsp_string1 = "\r\n<table cellpadding=\"4\" cellspacing=\"4\" class=\"tablasecundariatitulo\">\r\n	<tr>\r\n		<td style=\"text-align:left\" valign=\"top\">\r\n			<h2>".toCharArray();
    _jsp_string5 = "\">".toCharArray();
    _jsp_string9 = "\r\n								<a style='display:none' id='link_censo' href='' onclick=\"if(this.value != -1){this.parentNode.submit();}\">aqu&iacute;</a>\r\n							</form>\r\n							<script type=\"text/javascript\">\r\n								$(document).ready(function(){\r\n									$(\"#link_censo\").click();\r\n								});\r\n							</script>\r\n						".toCharArray();
    _jsp_string10 = "\r\n		</td>\r\n	</tr>\r\n</table>\r\n<iframe name='gToday:contrast:agenda.js' id='gToday:contrast:agenda.js' src='Contrast/ipopeng.htm' style='visibility: visible; z-index: 999; position: absolute; top: -500px; left: -500px;' scrolling='no' frameborder='0' height='142' width='132'>\r\n</iframe>\r\n				  </center>\r\n				</td>\r\n			</tr>\r\n		</table>\r\n		</center>\r\n		<div class=\"encapsulador\" id=\"id_encapsulador\" onclick=\"$('#id_encapsulador').hide('slow')\">\r\n			<div class=\"fondo\">\r\n				<div class=\"mensaje_alerta\">\r\n					<p><img src=\"comunes/imagenes/loading2.gif\" title=\"Cargando... por favor, espere un momento.\">&nbsp;Cargando... por favor, espere un momento.</p>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</body>\r\n	<script type=\"text/javascript\" src=\"comunes/javascript/jquery.qtip.js\"></script>\r\n	<script type=\"text/javascript\">\r\n		$('img[title]').qtip({\r\n			style: {\r\n				name: 'green',\r\n				tip: true,\r\n				color: 'black'\r\n			},\r\n			border: {\r\n				 width: 7,\r\n				 radius: 5,\r\n				 color: '#A2D959'\r\n			},\r\n			hide:{ when: { event: 'mouseout'}},\r\n			position: {\r\n				corner: {\r\n				 target: 'topMiddle',\r\n				 tooltip: 'bottomMiddle'\r\n				}\r\n			 }\r\n		});\r\n		$('a[title]').qtip({\r\n			style: {\r\n				name: 'green',\r\n				tip: true,\r\n				color: 'black'\r\n			},\r\n			border: {\r\n				 width: 7,\r\n				 radius: 5,\r\n				 color: '#A2D959'\r\n			},\r\n			hide:{ when: { event: 'mouseout'}},\r\n			position: {\r\n				corner: {\r\n				 target: 'topMiddle',\r\n				 tooltip: 'bottomMiddle'\r\n				}\r\n			 }\r\n		});\r\n	</script>\r\n</html>\r\n\r\n".toCharArray();
    _jsp_string7 = "\r\n							</select>\r\n						</form>\r\n						".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n<html>\r\n	<head>\r\n		<META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n		<title>SIGECENE - Sistema Para La Gesti\u00f3n De Censos, Encuestas y Estudios</title>\r\n		<link type=\"image/x-icon\" href=\"comunes/imagenes/favicon.ico\" rel=\"icon\" />\r\n		<link type=\"image/x-icon\" href=\"comunes/imagenes/favicon.ico\" rel=\"shortcut icon\" />\r\n		<link rel=\"stylesheet\" type=\"text/css\" href=\"comunes/css/micss.css\">\r\n		<!-- IE 6 \"fixes\" -->\r\n		<!--[if lt IE 7]>\r\n		<link type='text/css' href='comunes/css/basic_ie.css' rel='stylesheet' media='screen' />\r\n		<![endif]-->\r\n		<script type=\"text/javascript\" src=\"comunes/javascript/jquery.js\"></script>\r\n		<script type=\"text/javascript\" src=\"comunes/javascript/jquery.simplemodal.js\"></script>\r\n		<script type=\"text/javascript\" charset=\"UTF-8\">\r\n		if (/msie/i.test (navigator.userAgent)) //only override IE\r\n		{\r\n			document.nativeGetElementById = document.getElementById;\r\n			document.getElementById = function(id)\r\n			{\r\n				var elem = document.nativeGetElementById(id);\r\n				if(elem)\r\n				{\r\n					//make sure that it is a valid match on id\r\n					if(elem.attributes['id'].value == id)\r\n					{\r\n						return elem;\r\n					}\r\n					else\r\n					{\r\n						//otherwise find the correct element\r\n						for(var i=1;i<document.all[id].length;i++)\r\n						{\r\n							if(document.all[id][i].attributes['id'].value == id)\r\n							{\r\n								return document.all[id][i];\r\n							}\r\n						}\r\n					}\r\n				}\r\n				return null;\r\n			};\r\n		}\r\n\r\n		function validarEntero(_nombreElem){\r\n			var mielem = document.getElementById(_nombreElem);\r\n		  var er = /^[-]*[0-9]+$/;\r\n			if(mielem){\r\n				if(mielem.value.match(er)){\r\n					return true;\r\n				}else{\r\n					alert(\"Solo pueden ingresarse numeros enteros.\");\r\n					mielem.value = \"0\";\r\n					mielem.focus();\r\n					return false;\r\n				}\r\n			}\r\n			return false;\r\n		}\r\n\r\n		function validarDouble(_nombreElem){\r\n			var mielem = document.getElementById(_nombreElem);\r\n		  var er = /^[-+]?[0-9]+(\\.[0-9]+)?$/;\r\n			if(mielem){\r\n				if(mielem.value.match(er)){\r\n					return true;\r\n				}else{\r\n					alert(\"Solo pueden ingresarse numeros con o sin decimales.\");\r\n					mielem.value = \"0.0\";\r\n					mielem.focus();\r\n					return false;\r\n				}\r\n			}else{\r\n				return false;\r\n			}\r\n		}\r\n		</script>\r\n	</head>\r\n\r\n<body>\n	<center>\n	<table cellpadding=\"0\" cellspacing=\"0\" class=\"tablaprincipal\">\n		<tr>\n			<td valign=\"middle\" align=\"left\" style=\"border-top: burlywood ridge thick;border-left: burlywood ridge thick;border-width:3px;max-width:320px;width:320px\">\n				<a href=\"autenticarusuario.do\"><img src=\"comunes/imagenes/siagcee_logo.png\" alt=\"\"></a>\n			</td>\n		</tr>\n		<tr>\n			<td valign=\"top\" align=\"center\">\n				<center>\n			\r\n\r\n".toCharArray();
    _jsp_string2 = "</h2>\r\n		</td>\r\n		<td style=\"text-align:right\" valign=\"bottom\" width=\"36px\">\r\n			<a href=\"autenticarusuario.do\" ><img src=\"comunes/imagenes/back.png\" title=\"Regresar a la Secci&oacute;n Anterior\" alt=\"Regresar a la Secci&oacute;n Anterior\" ></a>\r\n		</td>\r\n	</tr>\r\n</table>\r\n\r\n\r\n<table class=\"tablasecundaria\" cellpadding=\"4\" cellspacing=\"4\">\r\n	<tr>\r\n		<td>\r\n			".toCharArray();
    _jsp_string6 = "</option>\r\n								".toCharArray();
    _jsp_string3 = "\r\n						<form action=\"autenticarusuario.do\" method=\"get\">\r\n							<label>Censo o Encuesta:</label><br />\r\n							<select id=\"identificador_publico\" name=\"identificador_publico\" onchange=\"if(this.value != -1){this.parentNode.submit();}\">\r\n								<option value=\"-1\">Seleccione...</option>\r\n							".toCharArray();
    _jsp_string4 = "\r\n									<option value=\"".toCharArray();
  }
}
