/*
 * JSP generated by Resin-3.0.28 (built Mon, 18 May 2009 02:16:38 PDT)
 */

package _jsp._web_22dinf._vistas;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import com.siagcee.logic.Objeto;
import com.siagcee.logic.OrdenadorObjetos;
import java.util.Collections;
import java.util.Enumeration;
import java.util.Vector;
import com.siagcee.logic.*;

public class _mostrarinfo__jsp extends com.caucho.jsp.JavaPage{
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.Application _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = com.caucho.jsp.QJspFactory.allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html;charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
HttpSession sesion = request.getSession();
Administrador admin = (Administrador)sesion.getAttribute("administrador");
if(admin == null){

      out.write(_jsp_string1, 0, _jsp_string1.length);
      pageContext.forward("autenticar.do");
      if (true) return;
      out.write('\n');
      
}

      out.write(_jsp_string2, 0, _jsp_string2.length);
      

String accion = "";
if(request.getAttribute("accion") != null){
	accion = (String)request.getAttribute("accion");
}

String mensaje = "";
if(request.getAttribute("mensaje") != null){
	mensaje = (String)request.getAttribute("mensaje");
	request.setAttribute("mensaje", "");
}

Objeto _miObj = null;
Pregunta _miPreg = null;
Estudio _miEst = null;
if(accion.equals("mostrarinfodepregunta")){
	_miPreg = (Pregunta)request.getAttribute("pregunta");
	out.println("<h3>"+_miPreg.getPregunta()+"</h3>");
}else if(accion.equals("mostrarinfodeobjeto")){
	_miObj = (Objeto)request.getAttribute("objeto");
	out.println("<h3>"+_miObj.getObjeto()+"</h3>");
	if(_miObj.getClass().toString().contains("Censo")){
		out.println("Instrumento para censos.<p />");
	}
	if(_miObj.getClass().toString().contains("Encuesta")){
		out.println("Instrumento para encuestas.<p />");
	}
	if(_miObj.getClass().toString().contains("Relacion")){
		out.println("Colecci&oacute;n de datos.<p />");
	}
	if(_miObj.getClass().toString().contains("EstructuraBase")){
		out.println("Estructura base.<p />");
	}
}else if(accion.equals("mostrarinfodeestudio")){
	_miEst = (Estudio)request.getAttribute("estudio");
	out.println("<h3>"+_miEst.getTitulo()+"</h3>");
}

if (!mensaje.equals("")) {
	out.println(mensaje + "<p />");
}

if(_miObj != null){
	if(_miObj.getCargadaDeBD()){
		//muestro toda la info publica del objeto
		Vector _misPregs = _miObj.getPreguntas();
		Collections.sort(_misPregs, new OrdenadorInstanciaPreguntas());
		Enumeration _misPregsEnu = _misPregs.elements();
		while(_misPregsEnu.hasMoreElements()){
			InstanciaPregunta _temp = (InstanciaPregunta)_misPregsEnu.nextElement();
			out.println("<h4>"+String.valueOf(_temp.getOrden())+". "+_temp.getTextoPregunta());
			if(_temp.isCampo_clave_unico()){
				out.println("<img src='comunes/imagenes/primary_key_icon.jpg' height='24' alt='Pregunta clave' title='Pregunta Clave'>");
			}
			if(_temp.isCampo_comunicacion_email()){
				out.println("<img src='comunes/imagenes/email.png' height='24' alt='Elemento de comunicaci&oacute;n por email' title='Elemento de comunicaci&oacute;n por email'>");
			}
			out.println("<br />");
			out.println("(Acr&oacute;nimo: "+_temp.getAcronimo()+")<br />");
			out.println("(Pregunta: "+_temp.getPreguntaAsociada().getPregunta()+")</h4>");
			if(_temp.getTipoPregunta() == 1){
				out.print("Cerrada de selecci&oacute;n simple, con los siguientes valores:<p />");
			}
			if(_temp.getTipoPregunta() == 2){
				out.print("Cerrada de selecci&oacute;n m&uacute;ltiple, con los siguientes valores:<p />");
			}
			if(_temp.getTipoPregunta() == 30){
				out.print("Abierta que acepta cualquier texto sin validaciones adicionales.<p />");
			}
			if(_temp.getTipoPregunta() == 31){
				out.print("Abierta que acepta &uacute;nicamente n&uacute;meros sin decimales.<p />");
			}
			if(_temp.getTipoPregunta() == 32){
				out.print("Abierta que acepta &uacute;nicamente n&uacute;meros con o sin decimales.<p />");
			}
			if(_temp.getTipoPregunta() == 33){
				out.print("Abierta que acepta &uacute;nicamente fechas.<p />");
			}
			if(_temp.getTipoPregunta() == 100){
				out.print("Abierta que no ser&aacute; mostrado a los encuestados y su utilidad es proveer un campo en la estructura para guardar valores de un estudio en particular.<p />");
			}
			if(_temp.getTipoPregunta() < 30){
				Vector _misResp = _temp.respuestasPosibles();
				Enumeration _misRespEnu = _misResp.elements();
				while(_misRespEnu.hasMoreElements()){
					RespuestasPosibles _tempResp = (RespuestasPosibles)_misRespEnu.nextElement();
					out.println(" - "+_tempResp.getRespuesta()+"<br />");
				}
			}
		}
	}else{
	  out.println("No se ha encontrado la estructura deseada.");	
	}
}
if(_miPreg != null){
	if(_miPreg.getCargadaDeBD()){
		out.println("Pregunta ");
		if(_miPreg.getTipoPregunta() == 1){
			out.print("Cerrada de selecci&oacute;n simple, con los siguientes valores:<p />");
		}
		if(_miPreg.getTipoPregunta() == 2){
			out.print("Cerrada de selecci&oacute;n m&uacute;ltiple, con los siguientes valores:<p />");
		}
		if(_miPreg.getTipoPregunta() == 30){
			out.print("Abierta que acepta cualquier texto sin validaciones adicionales.<p />");
		}
		if(_miPreg.getTipoPregunta() == 31){
			out.print("Abierta que acepta &uacute;nicamente n&uacute;meros sin decimales.<p />");
		}
		if(_miPreg.getTipoPregunta() == 32){
			out.print("Abierta que acepta &uacute;nicamente n&uacute;meros con o sin decimales.<p />");
		}
		if(_miPreg.getTipoPregunta() == 33){
			out.print("Abierta que acepta &uacute;nicamente fechas.<p />");
		}
		if(_miPreg.getTipoPregunta() == 100){
			out.print("Abierta que no ser&aacute; mostrado a los encuestados y su utilidad es proveer un campo en la estructura para guardar valores de un estudio en particular.<p />");
		}
		if(_miPreg.getTipoPregunta() < 30){
			Vector _misResp = _miPreg.retornaRespuestasPosibles();
			Enumeration _misRespEnu = _misResp.elements();
			while(_misRespEnu.hasMoreElements()){
				RespuestasPosibles _tempResp = (RespuestasPosibles)_misRespEnu.nextElement();
				out.println(" - "+_tempResp.getRespuesta()+"<br />");
			}
		}
	}else{
		out.println("No se ha encontrado la pregunta deseada.");	
	}
}
if(_miEst != null){
	if(_miEst.getCargadaDeBD()){
		out.println(_miEst.getDescripcion()+"<p />");
	}else{
		out.println("No se ha encontrado el estudio deseado.");
	}
}
	if(accion.equals("mostrarinfodeobjeto")){
		if((request.getParameter("perohaz") != null) && (request.getParameter("perohaz").equals("eliminar"))){

      out.write(_jsp_string3, 0, _jsp_string3.length);
       out.print(request.getParameter("tipoinstrumento"));
      out.write(_jsp_string4, 0, _jsp_string4.length);
       out.print(request.getParameter("opcionbase"));
      out.write(_jsp_string5, 0, _jsp_string5.length);
       out.print(_miObj.getId());
      out.write(_jsp_string6, 0, _jsp_string6.length);
      
		}
	}else{
		if((request.getParameter("perohaz") != null) && (request.getParameter("perohaz").equals("eliminar"))){

      out.write(_jsp_string7, 0, _jsp_string7.length);
       out.print(_miPreg.getId());
      out.write(_jsp_string6, 0, _jsp_string6.length);
      
		}
	}

      out.write(_jsp_string8, 0, _jsp_string8.length);
      
if(accion.equals("mostrarinfodeobjeto")){
 	if((request.getParameter("perohaz") != null) && (request.getParameter("perohaz").equals("eliminar"))){
	_miObj = (Objeto)request.getAttribute("objeto");

      out.write(_jsp_string9, 0, _jsp_string9.length);
       out.print(_miObj.getObjeto()); 
      out.write(_jsp_string10, 0, _jsp_string10.length);
       out.print(request.getParameter("tipoinstrumento"));
      out.write(_jsp_string4, 0, _jsp_string4.length);
       out.print(request.getParameter("opcionbase"));
      out.write(_jsp_string5, 0, _jsp_string5.length);
       out.print(_miObj.getId());
      out.write(_jsp_string11, 0, _jsp_string11.length);
       }
}else{
 	if((request.getParameter("perohaz") != null) && (request.getParameter("perohaz").equals("eliminar"))){
	_miPreg = (Pregunta)request.getAttribute("pregunta");

      out.write(_jsp_string12, 0, _jsp_string12.length);
       out.print(_miPreg.getId());
      out.write(_jsp_string11, 0, _jsp_string11.length);
      	}
}
 
      out.write(_jsp_string13, 0, _jsp_string13.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      com.caucho.jsp.QJspFactory.freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.make.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.util.CauchoSystem.getVersionId() != -4644494061398360982L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.make.Dependency depend;
      depend = (com.caucho.make.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/mostrarinfo.jsp"), -7056365962199263338L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/admininicio.jsp"), -2698818426022610974L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("WEB-INF/vistas/adminfooter.jsp"), 8445709753414532245L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string4;
  private final static char []_jsp_string5;
  private final static char []_jsp_string8;
  private final static char []_jsp_string10;
  private final static char []_jsp_string2;
  private final static char []_jsp_string12;
  private final static char []_jsp_string13;
  private final static char []_jsp_string0;
  private final static char []_jsp_string9;
  private final static char []_jsp_string7;
  private final static char []_jsp_string3;
  private final static char []_jsp_string6;
  private final static char []_jsp_string11;
  private final static char []_jsp_string1;
  static {
    _jsp_string4 = "&opcionbase=".toCharArray();
    _jsp_string5 = "&accionobjeto=eliminar&objetoseleccionado=".toCharArray();
    _jsp_string8 = "\n							<div style='text-align:right'><a href=\"#\" onclick=\"window.close();\" title=\"Cerrar esta ventana\" alt=\"Cerrar esta ventana\">Cerrar Ventana</a></div>\n						</td>\n					</tr>\n				</table>\n				<script type=\"text/javascript\" >\n					$(document).ready(function(){\n						window.opener.document.getElementById('id_encapsulador').style.display = 'none';\n					});\n				</script>\n".toCharArray();
    _jsp_string10 = " y las preguntas asociadas?')){\n				window.opener.location = \"adminobjetos2.do?tipoinstrumento=".toCharArray();
    _jsp_string2 = "\n<html>\n	<head>\n		<META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n		<title>SIGECENE - Sistema Para La Gesti\u00f3n De Censos, Encuestas y Estudios</title>\n    <link type=\"image/x-icon\" href=\"comunes/imagenes/favicon.ico\" rel=\"icon\" />\n    <link type=\"image/x-icon\" href=\"comunes/imagenes/favicon.ico\" rel=\"shortcut icon\" />\n		<link rel=\"stylesheet\" type=\"text/css\" href=\"comunes/css/micss.css\">\n		\n		<!-- IE 6 \"fixes\" -->\n		<!--[if lt IE 7]>\n		<link type='text/css' href='comunes/css/basic_ie.css' rel='stylesheet' media='screen' />\n		<![endif]-->\n		<script type=\"text/javascript\" src=\"comunes/javascript/jquery.js\"></script>\n		<script type=\"text/javascript\" src=\"comunes/javascript/jquery.simplemodal.js\"></script>\n		<script type=\"text/javascript\" src=\"comunes/javascript/jquery.tablesorter.min.js\"></script>\n		<script type=\"text/javascript\" src=\"comunes/javascript/espanol.js\"></script>\n		<script type=\"text/javascript\" src=\"comunes/javascript/whizzywig61.js\"></script>\n	</head>\n\n\n\n<!--\n * Creado por F\u00c3\u00a1bio Pereira.\n * Bajo la tutor\u00c3\u00ada del Prof. Francisco Mirabal.\n * Trabajo Especial De Grado.\n * Licenciatura de Computaci\u00c3\u00b3n.\n * Universidad Central de Venezuela.\n * Fecha: 16/12/2009\n * Hora: 10:56:47 PM\n-->\n\n<body>\n	<table cellpadding=\"0\" cellspacing=\"0\" class=\"tablaprincipal\">\n		<tr>\n			<td valign=\"middle\" align=\"left\" style=\"border-top: burlywood ridge thick;border-left: burlywood ridge thick;border-width:3px;max-width:320px;width:320px\">\n				<img src=\"comunes/imagenes/siagcee_logo.png\" alt=\"\">\n			</td>\n		</tr>\n		<tr>\n			<td valign=\"top\" align=\"left\">\n				<table cellpadding=\"4\" cellspacing=\"4\" class=\"tablasecundariatitulo\" style=\"width:600px;min-width:600px;max-width:600px;\">\n					<tr>\n						<td style=\"text-align:left\" valign=\"top\" >\n							<h2>Informaci&oacute;n</h2>\n						</td>\n					</tr>\n				</table>\n				<table cellspacing=\"4\" cellpadding=\"4\" class=\"tablasecundaria\" style=\"width:600px;min-width:600px;max-width:600px;\">\n					<tr>\n						<td style=\"text-align:left\" valign=\"top\">\n\n".toCharArray();
    _jsp_string12 = "\n	<script type=\"text/javascript\" >\n		$(document).ready(function(){\n			if(confirm('Realmente desea eliminar esta pregunta?')){\n				window.opener.location = \"adminpreguntas.do?accion=eliminar&preguntaseleccionada=".toCharArray();
    _jsp_string13 = "\n				  </center>\r\n				</td>\r\n			</tr>\r\n		</table>\r\n		</center>\r\n		<div class=\"encapsulador\" id=\"id_encapsulador\" onclick=\"$('#id_encapsulador').hide('slow')\">\r\n			<div class=\"fondo\">\r\n				<div class=\"mensaje_alerta\">\r\n					<p><img src=\"comunes/imagenes/loading2.gif\" title=\"Cargando... por favor, espere un momento.\">&nbsp;Cargando... por favor, espere un momento.</p>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</body>\r\n	<script type=\"text/javascript\" src=\"comunes/javascript/jquery.qtip.js\"></script>\r\n	<script type=\"text/javascript\">\r\n		$('img[title]').qtip({\r\n			style: {\r\n				name: 'green',\r\n				tip: true,\r\n				color: 'black'\r\n			},\r\n			border: {\r\n				 width: 7,\r\n				 radius: 5,\r\n				 color: '#A2D959'\r\n			},\r\n			hide:{ when: { event: 'mouseout'}},\r\n			position: {\r\n				corner: {\r\n				 target: 'topMiddle',\r\n				 tooltip: 'bottomMiddle'\r\n				}\r\n			 }\r\n		});\r\n		$('a[title]').qtip({\r\n			style: {\r\n				name: 'green',\r\n				tip: true,\r\n				color: 'black'\r\n			},\r\n			border: {\r\n				 width: 7,\r\n				 radius: 5,\r\n				 color: '#A2D959'\r\n			},\r\n			hide:{ when: { event: 'mouseout'}},\r\n			position: {\r\n				corner: {\r\n				 target: 'topMiddle',\r\n				 tooltip: 'bottomMiddle'\r\n				}\r\n			 }\r\n		});\r\n	</script>\r\n</html>\r\n".toCharArray();
    _jsp_string0 = "\n\n\n\n\n\n\n<!--\n * Creado por F\u00e1bio Pereira.\n * Bajo la tutor\u00eda del Prof. Francisco Mirabal.\n * Trabajo Especial De Grado.\n * Licenciatura de Computaci\u00f3n.\n * Universidad Central de Venezuela.\n * Fecha: 10/12/2009\n * Hora: 09:07:17 AM\n-->\n".toCharArray();
    _jsp_string9 = "\n	<script type=\"text/javascript\" >\n		$(document).ready(function(){\n			if(confirm('Realmente desea eliminar ".toCharArray();
    _jsp_string7 = "\n							<div style='text-align:right'><a href=\"#\" onclick='if(confirm(\"Realmente desea eliminar esta pregunta?\")){window.opener.location = \"adminpreguntas.do?accion=eliminar&preguntaseleccionada=".toCharArray();
    _jsp_string3 = "\n							<div style='text-align:right'><a href=\"#\" onclick='if(confirm(\"Realmente desea eliminar esta pregunta?\")){window.opener.location = \"adminobjetos2.do?tipoinstrumento=".toCharArray();
    _jsp_string6 = "\";window.close();}' title=\"Eliminar\" alt=\"Eliminar\">Eliminar</a></div>\n".toCharArray();
    _jsp_string11 = "\";\n				window.close();\n			}\n		});\n	</script>\n".toCharArray();
    _jsp_string1 = "\n	".toCharArray();
  }
}
